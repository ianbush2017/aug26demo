<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Dog Runner ‚Äî Fixed</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: grid;
      place-items: center;
      background: #eaf4ff;
      font-family: system-ui, sans-serif;
    }
    .game {
      width: 600px;
      height: 250px;
      background: linear-gradient(#bfe9ff, #eaf4ff);
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      position: relative;
      overflow: hidden;
    }
    .ground {
      position: absolute;
      left: 0; right: 0; bottom: 0;
      height: 60px;
      background: #c9d6ff;
    }
    .dog, .obstacle {
      position: absolute;
      font-size: 40px;
      user-select: none;
    }
    .score {
      position: absolute;
      top: 8px;
      left: 12px;
      font-weight: bold;
      background: rgba(255,255,255,0.6);
      padding: 4px 8px;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <div class="game" id="game">
    <div class="score" id="score">Score: 0</div>
    <div class="ground"></div>
    <div class="dog" id="dog" style="left:60px; bottom:60px;">üêï</div>
  </div>

  <script>
    const gameEl = document.getElementById('game');
    const dogEl = document.getElementById('dog');
    const scoreEl = document.getElementById('score');

    // physics constants
    const GROUND_Y = 60;
    const DOG_LEFT = 60;
    const DOG_SIZE = 40;
    const JUMP_VY = 14;   // stronger jump
    const GRAVITY = 0.8;  // slightly heavier gravity

    let dog = { x: DOG_LEFT, y: GROUND_Y, vy: 0, isAir: false };
    let obstacles = [];
    let score = 0;
    let gameOver = false;
    let spawnTimer = 0;
    let speed = 4;

    function spawnObstacle() {
      const el = document.createElement('div');
      el.className = 'obstacle';
      el.textContent = Math.random() < 0.5 ? 'ü¶¥' : 'ü™®';
      const startX = gameEl.clientWidth + 40;
      el.style.left = startX + 'px';
      el.style.bottom = GROUND_Y + 'px';
      gameEl.appendChild(el);
      obstacles.push({ el, x: startX, bottom: GROUND_Y, w: 30, h: 30 });
    }

    function jump() {
      if (!dog.isAir && !gameOver) {
        dog.vy = JUMP_VY;
        dog.isAir = true;
      }
    }

    function checkCollision(o) {
      // shrink hitboxes for fairness
      const dogBox = { left: dog.x+5, right: dog.x+DOG_SIZE-5, top: dog.y+DOG_SIZE-10, bottom: dog.y+5 };
      const obsBox = { left: o.x+5, right: o.x+o.w-5, top: o.bottom+o.h-5, bottom: o.bottom+5 };
      return !(dogBox.right < obsBox.left || dogBox.left > obsBox.right ||
               dogBox.top < obsBox.bottom || dogBox.bottom > obsBox.top);
    }

    function loop() {
      if (gameOver) return;

      // update dog
      dog.vy -= GRAVITY;
      dog.y += dog.vy;
      if (dog.y <= GROUND_Y) {
        dog.y = GROUND_Y;
        dog.vy = 0;
        dog.isAir = false;
      }
      dogEl.style.bottom = dog.y + 'px';

      // spawn obstacles (slower + spaced out)
      spawnTimer -= 1;
      if (spawnTimer <= 0) {
        spawnObstacle();
        spawnTimer = 120 + Math.random()*60; // 2‚Äì3 seconds spacing
      }

      // move obstacles
      for (let i = obstacles.length-1; i>=0; i--) {
        const o = obstacles[i];
        o.x -= speed;
        o.el.style.left = o.x + 'px';

        if (checkCollision(o)) {
          gameOver = true;
          scoreEl.textContent = "Game Over! Final Score: " + score;
        }

        if (o.x < -50) {
          o.el.remove();
          obstacles.splice(i,1);
          score += 10;
          scoreEl.textContent = "Score: " + score;
        }
      }

      requestAnimationFrame(loop);
    }

    // controls
    window.addEventListener('keydown', e => {
      if (e.code === 'Space' || e.code === 'ArrowUp') {
        jump();
      }
    });
    gameEl.addEventListener('click', jump);

    loop();
  </script>
</body>
</html>
