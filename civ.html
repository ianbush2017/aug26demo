<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Civ: Greeks vs Egyptians</title>
<style>
  body { background: #111; color: white; font-family: sans-serif; text-align: center; }
  #game { display: inline-block; margin-top: 20px; }
  .row { display: flex; }
  .tile {
    width: 60px; height: 60px;
    border: 1px solid #555;
    display: flex; align-items: center; justify-content: center;
    font-size: 32px;
    cursor: pointer;
    position: relative;
  }
  .selected { outline: 3px solid yellow; }
  .hp { position: absolute; top: 0; left: 0; font-size: 16px; color: white; }
</style>
</head>
<body>
<h1>Mini Civ: Greeks vs Egyptians</h1>
<p id="info">Turn: Greeks | Click to select/move unit</p>
<div id="game"></div>

<script>
const ROWS = 8, COLS = 10;
let turn = "GREEKS"; // GREEKS or EGYPTS
let selectedUnit = null;

// Initialize map tiles
const gameDiv = document.getElementById("game");
const tiles = [];

for(let r=0;r<ROWS;r++){
  const rowDiv = document.createElement("div");
  rowDiv.className = "row";
  const rowTiles = [];
  for(let c=0;c<COLS;c++){
    const tile = document.createElement("div");
    tile.className = "tile";
    rowDiv.appendChild(tile);
    rowTiles.push(tile);
  }
  gameDiv.appendChild(rowDiv);
  tiles.push(rowTiles);
}

// Units
const units = [
  {x:0,y:0,faction:"GREEKS",hp:3},
  {x:1,y:0,faction:"GREEKS",hp:3},
  {x:8,y:7,faction:"EGYPTS",hp:3},
  {x:9,y:7,faction:"EGYPTS",hp:3}
];

function render(){
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      tiles[r][c].textContent = "";
      tiles[r][c].classList.remove("selected");
      tiles[r][c].querySelectorAll(".hp").forEach(el=>el.remove());
    }
  }
  units.forEach(u=>{
    const tile = tiles[u.y][u.x];
    const emoji = u.faction=="GREEKS" ? "⚔️" : "🐪";
    tile.textContent = emoji;
    if(u.selected) tile.classList.add("selected");
    // HP
    const hpDiv = document.createElement("div");
    hpDiv.className = "hp";
    hpDiv.textContent = "❤️".repeat(u.hp);
    tile.appendChild(hpDiv);
  });
  document.getElementById("info").textContent = `Turn: ${turn} | Click to select/move unit`;
}

function getUnitAt(x,y){
  return units.find(u=>u.x===x && u.y===y);
}

// Tile click
tiles.forEach((row,r)=>{
  row.forEach((tile,c)=>{
    tile.addEventListener("click",()=>{
      const clickedUnit = getUnitAt(c,r);
      // Select own unit
      if(clickedUnit && clickedUnit.faction===turn){
        if(selectedUnit) selectedUnit.selected=false;
        selectedUnit = clickedUnit;
        selectedUnit.selected=true;
      }
      // Move or attack
      else if(selectedUnit){
        if(clickedUnit && clickedUnit.faction!==turn){
          clickedUnit.hp -= 1;
          if(clickedUnit.hp<=0){
            units.splice(units.indexOf(clickedUnit),1);
          }
          selectedUnit.selected=false;
          selectedUnit=null;
          turn = turn==="GREEKS"?"EGYPTS":"GREEKS";
        } else if(!clickedUnit){
          selectedUnit.x = c;
          selectedUnit.y = r;
          selectedUnit.selected=false;
          selectedUnit=null;
          turn = turn==="GREEKS"?"EGYPTS":"GREEKS";
        }
      }
      // Victory check
      const greeks = units.filter(u=>u.faction==="GREEKS");
      const egypts = units.filter(u=>u.faction==="EGYPTS");
      if(!greeks){ alert("EGYPTS WIN!"); location.reload(); }
      if(!egypts){ alert("GREEKS WIN!"); location.reload(); }

      render();
    });
  });
});

render();
</script>
</body>
</html>
